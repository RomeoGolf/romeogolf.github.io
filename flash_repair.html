<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Потрясенная флэшка</title>
  <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="stylesheet" href="http://romeogolf.site/theme/css/styles.css" type="text/css" />
  <link rel="stylesheet" type="text/css"  href="http://romeogolf.site/theme/css/pygments.css"/>
  <link rel="shortcut icon" type="image/png" href="http://romeogolf.site/images/RG32.ico" />
  <script language="JavaScript" src="http://romeogolf.site/theme/js/protector.js"></script>
</head>
<body>
  <header class="main-header">
    <div>
      <img src="http://romeogolf.site/images/72.png" style="margin-left: 34px; margin-top: 30px;"> <a id="name" href=http://romeogolf.site id="home-link">RomeoGolf</a>
    </div>
  </header>
    <nav class="nav_base">
      <ul class="main-nav">
          <li class="active"><a href="http://romeogolf.site/category/blog.html">Блог</a></li>
          <li><a href="http://romeogolf.site/category/tvorchestvo.html">Творчество</a></li>


          <li>
            <a href="http://romeogolf.site/pages/triangulum-soft.html">Triangulum Soft</a>
          </li>
          <li>
            <a href="http://romeogolf.site/pages/o-saite.html">О сайте</a>
          </li>
      </ul>
    </nav>
  <div class="layout">

    <div class="sidebar">
      <div class="tagcloud">
        Теги:
        <ul class="tagcloud">
          <li class="tag-4">
            <a href="http://romeogolf.site/tag/batcmd.html">
              bat/cmd
                <span class="badge">1</span>
            </a>
          </li>
          <li class="tag-2">
            <a href="http://romeogolf.site/tag/linux.html">
              linux
                <span class="badge">3</span>
            </a>
          </li>
          <li class="tag-2">
            <a href="http://romeogolf.site/tag/markdown.html">
              markdown
                <span class="badge">2</span>
            </a>
          </li>
          <li class="tag-0">
            <a href="http://romeogolf.site/tag/pelican.html">
              pelican
                <span class="badge">6</span>
            </a>
          </li>
          <li class="tag-4">
            <a href="http://romeogolf.site/tag/rfquiz.html">
              rfquiz
                <span class="badge">1</span>
            </a>
          </li>
          <li class="tag-4">
            <a href="http://romeogolf.site/tag/tar.html">
              tar
                <span class="badge">1</span>
            </a>
          </li>
          <li class="tag-4">
            <a href="http://romeogolf.site/tag/triangulum.html">
              triangulum
                <span class="badge">1</span>
            </a>
          </li>
          <li class="tag-2">
            <a href="http://romeogolf.site/tag/windows.html">
              windows
                <span class="badge">2</span>
            </a>
          </li>
          <li class="tag-4">
            <a href="http://romeogolf.site/tag/raznoe.html">
              разное
                <span class="badge">1</span>
            </a>
          </li>
          <li class="tag-2">
            <a href="http://romeogolf.site/tag/remont.html">
              ремонт
                <span class="badge">2</span>
            </a>
          </li>
          <li class="tag-2">
            <a href="http://romeogolf.site/tag/svoimi-rukami.html">
              своими руками
                <span class="badge">2</span>
            </a>
          </li>
          <li class="tag-2">
            <a href="http://romeogolf.site/tag/stikhi.html">
              стихи
                <span class="badge">2</span>
            </a>
          </li>
        </ul>
      </div> <!-- tagcloud -->
    </div> <!-- sidebar -->

    <div class="content">
  <section class="main-section blog-section" id="blog-posts">
    <h4 class="date">Вс 20 Март 2016</h4>
    <article>
      <h1>Потрясенная флэшка</h1>
      
      <p>Есть у меня флэшка, USB flash drive, на восемь гигов в нестандартном сувенирном корпусе. Я ее таскал с собой повсюду. Фактически, это был мой электронный блокнот с записками, которые могут понадобиться в разных местах, где есть компьютер. В частности, там хранились кое-какие наброски творчества и бортжурнал авто. Некоторые файлы были заметно актуальнее, чем их копия на компьютере, а бортжурнал и вовсе был в единственном экземпляре.</p>
<p>Эх, неспроста админы шутят, что люди делятся на две категории &mdash; те, кто еще не делают бэкапы, и те, кто уже делают&hellip;</p>
<p>В общем, недавно в магазине я доставал из кармана сумку, а за нее зацепилась флэшка и, чуть-чуть подлетев, хлопнулась на бетонный пол. Я не придал этому значения (еще порадовался, что заметил и не потерял), сунул ее назад в карман и забыл. Дома немного поработал за компьютером и решил сохранить кое-какие наработки на флэшке. Воткнул в разъем &mdash; а компьютер ее не видит! Ни винда, ни линукс, ни один разъем USB. Что характерно &mdash; лампочка на торце светится! Ровненько, не моргая&hellip; Похоже, испытание на устойчивость при воздействии механических ударов одиночного действия устройство не выдержало.</p>
<p>Обидно&hellip; Особенно за бортжурнал, хоть и не самый полезный файл, но зря я его вел, что ли?</p>
<p>Начал разбирать. Корпус нестандартный, клееный (хоть и треснувший по шву от удара), поэтому операция оказалась не очень простой. Кое-где детальки надломились. Впрочем, из-за постоянного таскания при себе то в кармане, то в сумке, то в рюкзаке вид флэшки и так несколько пожульканый, так что если чуть-чуть подклеить при восстановлении &mdash; в глаза бросаться не должно. Было бы что восстанавливать&hellip;</p>
<p>Разобрал. Традиционный вариант: плата, на одной стороне микросхема флэш-памяти, на другой контроллер с &laquo;обвесом&raquo; из smd-рассыпухи. Взял свою любимую лупу, которая в прошлой жизни была чьим-то то ли объективом, то ли окуляром в латунном корпусе, кратностью больше 10.</p>
<dl>
<dt>Лирическое отступление</dt>
<dd>Моя твердая уверенность: лупы, кратностью больше 10, просто обязаны быть хотя бы двухлинзовыми. Иначе у них бешеные аберрации по краям, совершенно невозможно смотреть. В этом плане хорошему окуляру трудно найти конкурентов.</dd>
</dl>
<p>Самое подозрительное место &mdash; контакт USB-разъема с платой &mdash; в полном порядке. Ни непропая, ни трещинки. На всякий случай пропаял лишний раз, не помогло.</p>
<p>Резисторы-конденсаторы выглядят прилично. Непропаев не видно, трещин на плате нет. Резисторы даже подписаны, прозвонил &mdash; номиналы соответствуют, не треснули.</p>
<p>Ну, микросхемы и спросить-то не о чем. Такой удар их с места не сдвинет, &laquo;волшебный дым&raquo; из них не выпустит, даже если был непропай контакта &mdash; остальные лапы удержат на месте, здесь скорее перепад температур что-то показал, а не удар.</p>
<p>А вот кварц &laquo;порадовал&raquo;. Мелкий такой цилиндрик с двумя ножками, засунутый в термоусадку. По-любому, это кварц, больше нечем ему быть. Тем более, подписан Y1. Одна из ножек не в контакте. Выпала из капли припоя! Ну, думаю, отлично! Впаиваю на место. А это не так-то просто. Стальные у него ноги, что ли? Не лудятся, в припое не держатся. Выпаял его совсем, зачистил лапки, облудил, пришлось кислоту использовать, впаял обратно. Не работает!</p>
<p>Вот тут стало грустно. Я же был уверен, что нашел неисправность! Облазил платку с лупой несколько раз. Ну, нету больше видимых проблем! А сгореть от удара флэш не могла. Если бы она из стратосферы падала и о бетон шмякнулась, то, может, и сгорела бы. А может, еще на подлете. А лампочка горит!</p>
<p>Подумал немного. Что могло отказать от удара? Резистор из-за трещины. Отпадает, я их прозвонил. Конденсатор из-за трещины или отслаивания контакной &laquo;обоймы&raquo;, не знаю, как правильно называется. Но почти все емкости фильтровые по питанию и на работу платы не влияют, кроме, разве что тех, что в цепи кварца, но выглядят все хорошо. Микросхемы? Не-е-е. Остается опять кварц. Этот мог и стряхнуться.</p>
<p>Нашел возможность воспользоваться осциллографом. Воткнул флэш в гнездо, на выводах кварца уровень. Вольта два. Частоты нет. Надо бы попробовать заменить, а на что? Он, зараза, не подписан. Но, имея опыт вскрытия других флэшек, я помню, что у некоторых стояли кварцевые генераторы, подписанные 12 МГц, хотя разок видел и на 8 МГц. Опять же, USB синхруется частотой 48 МГц, и для контроллера было бы логично выбрать что-то кратное: 12 или 24. Но под рукой ничего подобного нет. Есть несколько с материнских плат на 14,318, 25, 25,5 и какие-то неподписанные. Есть несколько крупных отечественных на 8, 10, 20 мегагерц. Это не считая всяких дробных частот, типа для часов или UART. Начал пробовать &mdash; хуже все равно не будет. Цилиндрические кварцы из материнок подпаял по месту, а для остальных пришлось удлинять лапы проводочками.</p>
<p>Интересно: некоторые кварцы вели себя в точности, как &laquo;родной&raquo; &mdash; с уровнем вместо частоты, а некоторые давали какую-то частоту в момент подключения в гнездо, а потом частота пропадала. Ну, оно и понятно &mdash; соединение не удалось, можно отключаться. Порылся на работе среди старых макетов, которые свалены в кучу в качестве доноров для новых макетов. И &mdash; ура! &mdash; нашел кварц на 12 МГц. Впаял его. Воткнул флэшку с болтающимся на проводах кварцем в гнездо USB &mdash; лампочка заморгала, флэшка определилась! Это ура!</p>
<p>Запустил копирование данных с флэшки на компьютер. Из трех с половиной гигов скопировалось почти всё. Почему-то оказался битым один exe-файл, некий инсталлятор. Сильно, видать, тряхнуло!</p>
<p>Теперь у меня есть флэшка с кварцем, который размером в полфлэшки. Запихать это &laquo;изделие&raquo; обратно в корпус можно даже и не мечтать. Кварцев такого размера такой частоты в радиусе 300 км в продаже нет. Заказывать через интернет обидно: при цене детали в два рубля доставка &mdash; двести. С другой стороны, лучше отдать двести два рубля и получить работающую флэшку, чем бороться с жабой и без флэшки.</p>
<p>Пока это выглядит так &mdash; флэшка, отпаяный дохлый кварц и припаяный отечественный кварц:</p>
<p><a href="http://romeogolf.site/images/flash/flash.jpg" title="Флэшка и кварц"><img alt="Флэшка и кварц" src="http://romeogolf.site/images/flash/pre_flash.jpg" title="Флэшка и кварц" /></a></p>
<p>В конце концов, все-таки заказал на алиэкспрессе пять кварцев за 166 рублей. И остальные четыре, надеюсь, применю куда-нибудь. Найти оказалось несложно, они среди параметров имели в том числе и размеры &mdash; длина 6 мм и диаметр 2 мм, то, что надо. На днях пришел конвертик на почту, впаял &mdash; заработало!</p>
      <br/>	
      <footer>
          <div>
            <div>Теги:</div>
            <div class="taglist">
              <ul class="tags">
                <li><a href="http://romeogolf.site/tag/remont.html" class="tag">ремонт</a></li>
                <li><a href="http://romeogolf.site/tag/svoimi-rukami.html" class="tag">своими руками</a></li>
              </ul>
            </div>
          </div>
        <br/>
        <div class="comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
            var disqus_identifier = "flash_repair.html";
            (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = 'http://romeogolf.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
          </script>
          <noscript>
            <div>Для чтения и написания комментариев требуется включить JavaScript.</div>
	  </noscript>
        </div>
      </footer>
    </article>
  </section>
    </div> <!-- content -->
    
  </div> <!-- layout -->

  <div class="footer">
    &copy; 2016 RomeoGolf


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72333148-1', 'auto');
  ga('send', 'pageview');

</script>

<!--    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-72333148-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> -->
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter35090040 = new Ya.Metrika({
                    id:35090040,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    webvisor:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/35090040" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </div> <!-- footer -->

</body>
</html>